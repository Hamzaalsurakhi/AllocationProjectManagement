@model PresentationLayer.ViewModels.ResetPasswordViewModel
@{ 
    ViewBag.Title = "Reset Password";

}
<!-- Bootstrap CSS and Custom CSS -->
<link href="~/startbootstrap-sb-admin-2/css/sb-admin-2.min.css" rel="stylesheet" />
<link href="~/css/ProfileCSS.css" rel="stylesheet" />
<link href="~/css/ProjectColor.css" rel="stylesheet" />

<div class="login pt-5 pb-5">
    <div class="container pt-4 pb-4">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-8 col-sm-10">
                <div class="boxLogin p-5 border rounded shadow-sm">
                    <form method="post" asp-action="ResetPassword" asp-controller="Account" enctype="multipart/form-data">
                        <h4 class="text-center mb-4 card-title">RESET PASSWORD</h4>
                        <div class="mb-3">
                            <label class="form-label" asp-for="CurrentPassword">Current Password</label>
                            <input type="password" class="form-control" asp-for="CurrentPassword">
                            <span class="text-danger" asp-validation-for="CurrentPassword"></span>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" asp-for="NewPassword">New Password</label>
                            <input type="password" class="form-control" asp-for="NewPassword">
                            <span class="text-danger" asp-validation-for="NewPassword"></span>
                        </div>
                        <div class="mb-3">
                            <label class="form-label" asp-for="ConfirmPassword">Confirm Password</label>
                            <input type="password" class="form-control" asp-for="ConfirmPassword">
                            <span class="text-danger" asp-validation-for="ConfirmPassword"></span>
                        </div>
                        <hr class="sidebar-divider">
                        <div class="text-center mb-3 mt-3 w-100">
                            <button type="submit" class="btn btn-primary w-100">Reset Now</button>
                        </div>
                        <div class="text-center mb-3">
                            <a asp-action="Profile" asp-controller="Home" class="btn btn-secondary w-100">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $(document).ready(function () {
            var successMessage = '@TempData["SuccessMessage"]';

            if (successMessage) {
                Swal.fire({
                    title: 'Success!',
                    text: successMessage,
                    icon: 'success',
                    confirmButtonText: 'OK'
                }).then(function () {
                    window.location.href = '@Url.Action("Profile", "Home", new { userName = User.Identity.Name })'; // Redirect to profile page
                });
            }
        });
    </script>
}
